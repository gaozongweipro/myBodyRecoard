# SmartCare Pro - 功能详解文档

**SmartCare Pro** 是一款专注于个人医疗数据隐私与智能管理的移动端应用。它利用先进的 AI 技术帮助用户整理繁杂的纸质病历、检查报告和处方单，同时通过端到端的隐私设计确保敏感信息不被泄露。

---

## 核心功能概览

### 1. 智能影像采集与预处理
*   **多源上传**：支持直接调用系统相机拍摄或从相册选择图片。
*   **多页拼合**：支持一次性拍摄多张单据（如多页的住院清单），进入待处理区统一管理。
*   **交互式引导**：采用 Apple 风格的 Action Sheet 引导用户选择上传方式，操作流畅。

### 2. 隐私脱敏画布 (Privacy Canvas)
在将图片发送给 AI 分析之前，用户拥有绝对的控制权：
*   **涂抹模式**：用户可手动涂抹掉姓名、身份证号等敏感个人信息。支持调整笔刷大小。
*   **拖拽缩放**：支持双指缩放和拖动图片，方便在手机小屏幕上精细操作。
*   **撤销机制**：提供完整的撤销功能，防止误操作。
*   **安全机制**：**仅脱敏后的图片**会被发送至云端进行结构化分析，原图始终保留在本地或被用户销毁。

### 3. AI 智能结构化 (基于通义千问)
*   **OCR 与语义理解**：利用大模型能力，自动识别单据类型（如“检验报告”、“处方”、“挂号单”）。
*   **关键信息提取**：
    *   **医院/科室/医生**：自动归档就诊来源。
    *   **时间**：自动解析就诊日期。
    *   **诊断结论**：提取核心诊断信息或医嘱。
    *   **用药明细**：提取药品名称、用法用量、价格。
    *   **检验指标**：结构化提取检验项目、结果值、单位，并自动识别异常标记（↑/↓）。
    *   **费用**：自动提取总金额。

### 4. 档案管理与编辑
*   **详情查阅**：类似于 Apple Wallet 的卡片式设计，清晰展示单据详情。
*   **双模式查看**：支持一键切换查看“原图”与“脱敏图”，方便核对信息。
*   **全屏预览**：提供沉浸式的大图预览功能，支持无损缩放。
*   **手动校对**：AI 识别后的内容支持用户手动修改、补充或删除，确保档案准确无误。

### 5. 本地化存储与搜索
*   **IndexedDB 存储**：所有数据（图片 Blob、结构化 JSON）默认存储在浏览器/Webview 的本地数据库中，保障数据主权。
*   **全局搜索**：支持对医院名称、药品名、检查项、诊断内容进行全文检索。

### 6. 健康罗盘 (统计分析)
可视化展示用户的就诊概况：
*   **支出统计**：累计医疗花费展示。
*   **科室排行**：分析高频就诊科室。
*   **类型分布**：展示病历、处方、报告单的比例。

---

## 交互设计亮点

*   **iOS 设计规范**：全站采用圆角（Rounded）、毛玻璃（Blur）、胶囊按钮（Pill Shape）等现代 iOS 设计元素。
*   **优雅转场**：页面切换、弹窗展开均配备了流畅的缩放与淡入淡出动画（Animate-in/Zoom-in）。
*   **触觉反馈**：按钮点击具备缩放反馈（Active Scale），提升操作确认感。

---

## 技术架构简述

*   **前端框架**: React 19 + Vite
*   **UI 库**: TailwindCSS (配合 lucide-react 图标库)
*   **移动端适配**: Capacitor (支持打包为 Android/iOS Native App)
*   **本地数据库**: Dexie.js (IndexedDB 封装)
*   **AI 服务**: 阿里云 DashScope (Qwen-VL-Plus/Max)
